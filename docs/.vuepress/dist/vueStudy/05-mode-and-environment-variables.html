<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Modes | Vue HStudy</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.76a0677b.css" as="style"><link rel="preload" href="/assets/js/app.ccdd7dc9.js" as="script"><link rel="preload" href="/assets/js/2.cd210312.js" as="script"><link rel="preload" href="/assets/js/14.053af1b1.js" as="script"><link rel="prefetch" href="/assets/js/10.a4b5a017.js"><link rel="prefetch" href="/assets/js/11.0cc1039c.js"><link rel="prefetch" href="/assets/js/12.14a2d88e.js"><link rel="prefetch" href="/assets/js/13.cf2b785b.js"><link rel="prefetch" href="/assets/js/15.52b9f270.js"><link rel="prefetch" href="/assets/js/16.c2c81773.js"><link rel="prefetch" href="/assets/js/17.2d930793.js"><link rel="prefetch" href="/assets/js/18.a31162fc.js"><link rel="prefetch" href="/assets/js/19.9dcf5086.js"><link rel="prefetch" href="/assets/js/20.1617738d.js"><link rel="prefetch" href="/assets/js/3.b2051f18.js"><link rel="prefetch" href="/assets/js/4.8fdc822b.js"><link rel="prefetch" href="/assets/js/5.2c978c15.js"><link rel="prefetch" href="/assets/js/6.b06d1fd3.js"><link rel="prefetch" href="/assets/js/7.e0102d67.js"><link rel="prefetch" href="/assets/js/8.c9e97341.js"><link rel="prefetch" href="/assets/js/9.57a08b59.js">
    <link rel="stylesheet" href="/assets/css/0.styles.76a0677b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Vue HStudy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vueStudy/" class="nav-link router-link-active">
  Vue-Study
</a></div><div class="nav-item"><a href="/vuePress/" class="nav-link">
  Vue-Press
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vueStudy/" class="nav-link router-link-active">
  Vue-Study
</a></div><div class="nav-item"><a href="/vuePress/" class="nav-link">
  Vue-Press
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>VUE-CLI</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueStudy/" aria-current="page" class="sidebar-link">Vue CLI - Basic</a></li><li><a href="/vueStudy/00-Vue-CLI-Doc.html" class="sidebar-link">Vue Cli - DOC</a></li><li><a href="/vueStudy/01-browser-compatibility.html" class="sidebar-link">Browser Compatibility</a></li><li><a href="/vueStudy/02-html-static-asset.html" class="sidebar-link">HTML 및 정적자산</a></li><li><a href="/vueStudy/03-work-with-css.html" class="sidebar-link">Working with CSS</a></li><li><a href="/vueStudy/04-work-with-webpack.html" class="sidebar-link">Working with WebPack</a></li><li><a href="/vueStudy/05-mode-and-environment-variables.html" aria-current="page" class="active sidebar-link">Modes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vueStudy/05-mode-and-environment-variables.html#환경변수-environment-variables" class="sidebar-link">환경변수 (Environment Variables)</a></li></ul></li><li><a href="/vueStudy/06-build-target.html" class="sidebar-link">Build Target</a></li><li><a href="/vueStudy/07-troubleshoting.html" class="sidebar-link">Troubleshooting</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>VUE-Plugin</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueStudy/vp-00-basic.html" class="sidebar-link">Plugins</a></li><li><a href="/vueStudy/vp-01-prettier.html" class="sidebar-link">Prettier</a></li><li><a href="/vueStudy/vp-02-pwa.html" class="sidebar-link">Progressive Web Application</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="modes"><a href="#modes" class="header-anchor">#</a> Modes</h1> <p>Mode 는 Vue CLI 프로젝트의 중요한 컨셉이다. 기본적으로 3가지 모드가 있다.</p> <ol><li><p><strong>development</strong></p> <p>— <code>vue-cli-service serve</code> 로 사용된다.</p></li> <li><p><strong>test</strong></p> <p>— <code>vue-cli-service test:unit</code>로 사용된다.</p></li> <li><p><strong>production</strong></p> <p>— <code>vue-cli-service build</code> 와 <code>vue-cli-service test:e2e</code> 로 사용된다.</p></li></ol> <p><code>--mode</code> 옵션 플래그를 전달하여 명령에 사용되는 기본 모드를 덮어쓸 수 있다.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>vue-cli-service build --mode development
</code></pre></div><p>이런 경우, build 명령어를 development 명령어로 덮어쓴다.</p> <p>vue-cli-service를 실행될 때, 모든 corresponding files로부터 환경 변수가 로드된다. 만약 <code>NODE_ENV</code> 변수가 포함되지 않은 경우 그에 따라 설정됩니다. 예를 들어 <code>NODE_ENV</code>는 프로덕션 모드에서는 &quot;production&quot;으로, 테스트 모드에서는 <code>&quot;test&quot;</code>로, 그렇지 않으면 <code>&quot;development&quot;</code>로 설정된다.</p> <p>그럼 <code>NODE_ENV</code>는 앱이 기본 모드(개발, 프로덕션 또는 테스트)에서 실행 중이고 결과적으로 어떤 웹 팩 구성을 만들 것인지 결정한다.</p> <p>예를 들어 <code>NODE_ENV</code>를 &quot;test&quot;로 설정하면, Vue CLI는 unit test 최적화되어 있는 웹 팩 구성을 생성한다. 유닛 테스트에 불필요한 이미지 및 기타 자산은 처리하지 않는다.</p> <p>마찬가지로 <code>NODE_ENV= development</code> 웹팩 설정을 생성하여 HMR(Hot Module Replacement)을 활성화하거나 자산을 해시하거나 vendor bundles 를 생성하여 개발 서버를 실행할 때 신속하게 재확보할 수 있다.</p> <ul><li><strong>HMR</strong></li></ul> <p><code>vue-cli-service</code> 빌드를 실행하는 경우 배포 환경에 관계없이 <code>NODE_ENV</code>를 항상 &quot;production&quot;으로 설정하여 배포할 수 있는 앱을 얻어야 합니다.</p> <blockquote><p>환경에 기본 <code>NODE_ENV</code>가 있는 경우 <code>vue-cli-service</code>명령을 실행할 때 이를 제거하거나 <code>NODE_ENV</code>를 명시적으로 설정해야 한다.</p></blockquote> <h2 id="환경변수-environment-variables"><a href="#환경변수-environment-variables" class="header-anchor">#</a> 환경변수 (Environment Variables)</h2> <p>프로젝트 루트에 파일 배치를 통해 환경 변수를 지정할 수 있다.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>.env                <span class="token comment"># loaded in all cases</span>
.env.local          <span class="token comment"># loaded in all cases, ignored by git</span>
.env.<span class="token punctuation">[</span>mode<span class="token punctuation">]</span>         <span class="token comment"># only loaded in specified mode</span>
.env.<span class="token punctuation">[</span>mode<span class="token punctuation">]</span>.local   <span class="token comment"># only loaded in specified mode, ignored by git</span>
</code></pre></div><p>env 파일에는 환경 변수의 키=값 쌍만 포함한다.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">FOO</span><span class="token operator">=</span>bar
<span class="token assign-left variable">VUE_APP_NOT_SECRET_CODE</span><span class="token operator">=</span>some_value
</code></pre></div><p><code>NODE_ENV</code>, <code>BASE_URL</code></p> <p><code>'NODE_ENV', 'BASE_URL'</code> 혹은 <code>'VUE_'APP_'</code>로 시작하는 변수만 <em>클라이언트 번들</em>에 '웹 팩'과 함께 정적으로 내장(<code>webpack.DefinePlugin</code>)됩니다. 같은 이름을 가질 수 있는 개인 키가 기계에 실수로 노출되지 않도록 하기 위한 것이다.</p> <p>이외의 다른 규칙은 이곳에서 확인 가능하다.</p> <p><a href="https://github.com/motdotla/dotenv#rules" target="_blank" rel="noopener noreferrer">GitHub - motdotla/dotenv: Loads environment variables from .env for nodejs projects.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>또한  <strong><a href="https://github.com/motdotla/dotenv-expand" target="_blank" rel="noopener noreferrer">dotenv-expand<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> 를 사용한 표현식도 가능하다. (available in Vue CLI 3.5+)</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">FOO</span><span class="token operator">=</span>foo
<span class="token assign-left variable">BAR</span><span class="token operator">=</span>bar

<span class="token assign-left variable">CONCAT</span><span class="token operator">=</span><span class="token variable">$FOO</span><span class="token variable">$BAR</span> <span class="token comment"># CONCAT=foobar</span>
</code></pre></div><p><strong>Env Loading Priorities</strong></p> <blockquote><p>특정 모드에 대한 Env 파일(예: .env.production)이 일반 모드(예: .env)보다 높은 우선순위를 가진다.
또한 Vue CLI를 실행할 때 이미 존재하는 환경 변수의 우선 순위가 가장 높으며 .env 파일에서 덮어쓰지 않는다.
.env 파일은 vue-cli 서비스를 시작할 때 로드된다. 변경한 후 서비스를 다시 시작해야 한다.</p></blockquote> <h3 id="example-staging-mode"><a href="#example-staging-mode" class="header-anchor">#</a> Example: Staging Mode</h3> <p>다음과 같은 파일이 있는 경우.</p> <p>[ **.env ]**</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">VUE_APP_TITLE</span><span class="token operator">=</span>My App
</code></pre></div><p>[ <strong>.env.staging</strong> ]</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production
<span class="token assign-left variable">VUE_APP_TITLE</span><span class="token operator">=</span>My Staging App
</code></pre></div><ul><li><code>vue-cli-service build</code> 로 프로젝트를 빌드할때,  <code>.env</code>, <code>.env.production</code> , <code>.env.production.local</code> 가 존재하면 읽어온다.</li> <li><code>vue-cli-service build --mode staging</code> staging mode 로 프로젝트를 빌드할때, <code>.env</code>, <code>.env.staging</code> , <code>.env.staging.local</code> 가 존재하면 읽어온다.</li></ul> <p>두 가지 케이스 모두 <code>NODE_ENV</code>, 때문에 Production app으로 빌드된다. 하지만, staging 버전은 <code>process.env.VUE_APP_TITLE</code> 가 다른 값으로 덮어씌워진다.</p> <h3 id="using-env-variables-in-client-side-code"><a href="#using-env-variables-in-client-side-code" class="header-anchor">#</a> <strong>Using Env Variables in Client-side Code</strong></h3> <p>환경 변수에 접근하고 싶을때, 이처럼 접근한다.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_NOT_SECRET_CODE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>VUE<em>APP</em>* 변수 외에도 앱 코드에서 항상 사용할 수 있는 두 가지 특수 변수가 있다.</p> <ul><li><p><strong>NODE_ENV</strong></p> <p>—앱이 실행되는 모드에 따라 &quot;개발&quot;, &quot;프로덕션&quot; 또는 &quot;테스트&quot; 중 하나가 된다.</p></li> <li><p><strong>BASE_URL</strong></p> <p>—vue.config.js의 publicPath 옵션에 해당하며 앱이 배포되는 기본 경로</p></li></ul> <p>모든 환경 변수들은 <code>public/index.html</code> 에서 보간법으로 사용가능하다.</p> <p><strong><a href="https://cli.vuejs.org/guide/html-and-static-assets.html#interpolation" target="_blank" rel="noopener noreferrer">HTML - Interpolation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>.</p> <blockquote><p><strong>TIP</strong> <code>vue.config.js</code> 에서 env var를 computed하게 사용할 수도 있다.
하지만, <code>VUE_APP_</code> 표현식은 사용해야한다.</p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_VERSION</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./package.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// config</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="local-only-variables"><a href="#local-only-variables" class="header-anchor">#</a> <strong>Local Only Variables</strong></h3> <p>깃에 커밋하고 싶지 않을때,  <code>.env.local</code> 는  <code>.gitignore</code> 가 기본이다.</p> <p>깃 ignore하고 싶다면, 모드명 뒤에 <code>.local</code> 을 붙이면 된다.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vueStudy/04-work-with-webpack.html" class="prev">
        Working with WebPack
      </a></span> <span class="next"><a href="/vueStudy/06-build-target.html">
        Build Target
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ccdd7dc9.js" defer></script><script src="/assets/js/2.cd210312.js" defer></script><script src="/assets/js/14.053af1b1.js" defer></script>
  </body>
</html>
